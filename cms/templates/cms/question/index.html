{% extends 'cms/layout/base.html' %}

{% load static %}
{% load fontawesome %}

{% block extended_head %}
  <link href="{% static 'cms/css/question/index.css' %}"
        rel="stylesheet"/>
  <script type = "text/javascript"
          src="{% static 'cms/js/question/index.js' %}">
  </script>

  <script type = "text/javascript"
          src="{% static 'ckeditor/ckeditor.js' %}">
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
  </script>
{% endblock %}

{% block breadcrumb %}
  <div>
    <ol class="breadcrumb custom-navbar-item">
      <li>
        <a id="breadcrumb-home" href="#">
          {% fontawesome_icon 'home' color='blue' %}
        </a>
      </li>
      <li id="breadcrumb-question" class="active">
         {% fontawesome_icon 'question' color='blue' %}
      </li>
    </ol>
  </div>
{% endblock breadcrumb %}

{% block main_content %}
  <a href="/cms/create_question">
    <button type="button" class="btn btn-success new-button">
      Add new Question
    </button>
  </a>

  <div class="row">
    <div class="col-sm-3">
      <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#practice">Topic (Practice)</a></li>
        <li><a data-toggle="tab" href="#exam">Exam</a></li>
      </ul>

      <div class="tab-content"  >
        <div id="practice" class="tab-pane fade in active">
          <ul class="nav nav-stacked">
            {% for topic in topics %}
              {% if topic.name == topic_name %}
                <li class="active selected-highlight" role="presentation">
                  <a href="/cms/question_topic_detail/{{topic.id}}">
                    {{topic.name}}
                  </a>
                </li>
              {% else %}
                <li class="active" role="presentation">
                  <a href="/cms/question_topic_detail/{{topic.id}}">
                    {{topic.name}}
                  </a>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </div>
        <div id="exam" class="tab-pane fade">
          <ul class="nav nav-stacked">
            <li role="presentation">
            {% for paper in papers %}
              <a href="/cms/question_paper_detail/{{paper.id}}">
                Paper {{paper.year}} {{paper.get_month_display}} {{paper.number}}
              </a>
            {% endfor %}
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="col-sm-9">
      <table id="items" class="display" width="100%" cellspacing="0">
        <thead class="custom-header">
          <tr>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {% for question in questions %}
            <tr>
              <td>
                <div class="row">
                  <div class="col-sm-8 pull-left">
                    <ul class="nav nav-pills nav-stacked">
                      <li role="presentation" class = "question-title">
                        Question {{ forloop.counter }}
                      </li>
                      <li role="presentation" class = "difficulty-level-display text-center">
                        <span>{{ question.get_difficulty_level_display }}</span>
                      </li>
                    </ul>
                  </div>
                  <div class="col-sm-4 pull-right">
                    <div class="btn-group" role="group" aria-label="...">
                      <a href="">
                        <button type="button" class="btn btn-success">
                          Test
                        </button>
                      </a>
                      <a href="/cms/edit_question/{{ question.id }}">
                        <button type="button" class="btn btn-warning">Edit</button>
                      </a>
                      <a href="/cms/delete_question/{{ question.id }}">
                        <button type="button" class="btn btn-danger">Delete</button>
                      </a>
                    </div>
                  </div>
                </div>
                <div class="row question-content">
                  <hr>
                  {{ question.content | safe }}
                  </br>
                  {% for part in question.part_set.all %}
                    {{ part.content | safe}}
                  {% endfor %}
                </div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock main_content %}
